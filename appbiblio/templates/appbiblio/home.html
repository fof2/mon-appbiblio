{%load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö MonBiblio - Votre biblioth√®que num√©rique</title>
        <link href="" rel="stylesheet">

    
    <!-- Polices Google -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'appbiblio/home.css' %}">



</head>

<body>
    <!-- Barre de navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
                <i class="fas fa-book me-2"></i>
                MonBiblio
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="{% url 'home' %}">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'gestion_admin' %}">Admin</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="{% url 'panier' %}">Mon Panier</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'emprunts' %}">Mes Commandes</a>
                    </li>
                    {% if user.is_authenticated %}
                        <li class="nav-item">
                            <a href="{% url 'logout' %}" class="nav-link text-warning">D√©connexion</a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}">Connexion</a>
                        </li>
                    {% endif %}
                </ul>
                <div class="d-none d-lg-flex ms-lg-3">
                    <a href="#" class="btn btn-sm btn-outline-light rounded-pill">
                        <i class="fas fa-search me-1"></i> Rechercher
                    </a>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Section Hero -->
    <section class="hero-section">
        <!-- Fonds images -->
        <div class="hero-bg active" style="background-image: url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?q=80&w=2030&auto=format&fit=crop');"></div>
        <div class="hero-bg" style="background-image: url('https://images.unsplash.com/photo-1521587760476-6c12a4b040da?q=80&w=2070&auto=format&fit=crop');"></div>
        <div class="hero-bg" style="background-image: url('https://images.unsplash.com/photo-1461342110089-4037e3abd5da?q=80&w=2070&auto=format&fit=crop');"></div>
        <div class="hero-overlay"></div>

        <!-- Contenu -->
        <div class="container">
            <div class="hero-content">
                <div class="banner">
                    <marquee scrollamount="10">
                    <i><u>MonBiblio üìö</u>, l'univers des livres les plus c√©l√®bres</i>
                    </marquee>
                </div>            
                <h1 class="hero-title">D√©couvrez de nouveaux mondes √† travers les livres</h1>
                <p class="hero-text">Notre biblioth√®que vous offre un acc√®s √† des milliers d'ouvrages. Empruntez, r√©servez et plongez dans l'univers fascinant de la litt√©rature.</p>
                <div class="d-flex flex-column flex-sm-row gap-3">
                    <a href="#" class="btn hero-btn hero-btn-primary">
                        Explorer le catalogue
                        <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                    <a href="#" class="btn hero-btn hero-btn-outline">
                        <i class="fas fa-book-open me-2"></i>
                        Nouveaut√©s
                    </a>
                </div>
                <div class="slider-indicators mt-4">
                    <span class="slider-dot active" data-index="0"></span>
                    <span class="slider-dot" data-index="1"></span>
                    <span class="slider-dot" data-index="2"></span>
                </div>
            </div>
        </div>
    </section>

    <!-- Carte de bienvenue -->
    <div class="container">
        <div class="welcome-card">
            <div class="welcome-header text-white">
                <h2>Bienvenue, {{ request.user.username }} !</h2>
            </div>
            <div class="card-body">
                <p class="lead">Nous sommes heureux de vous avoir parmi nous.</p>
                <p class="mb-4">Vous pouvez maintenant commencer √† explorer notre biblioth√®que en ligne et commander des livres.</p>
                <a href="{% url 'home' %}" class="btn btn-primary px-4 py-2">
                    <i class="fas fa-book me-2"></i>Acc√©der √† votre biblioth√®que
                </a>
            </div>
        </div>
    </div>

    <!-- Section Cat√©gories et Livres -->
<!-- Section Cat√©gories et Livres -->
<div class="container">
    <div class="row">
        <!-- Section: Filtres par Cat√©gories -->
        <section class="col-lg-3 mb-4" id="categorie-filter-section">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white">
                    <h3 class="mb-0">Filtrer par Cat√©gorie</h3>
                </div>
                <div class="card-body p-0">
                    <ul class="list-group list-group-flush">
                        {% for categorie in categories %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <a href="{% url 'categorie_detail' categorie.id %}" class="text-decoration-none text-dark fw-medium">
                                <i class="fas fa-folder me-2"></i>{{ categorie.nom }}
                            </a>
                            <span class="badge rounded-pill bg-primary">{{ categorie.nombre_livres }}</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </section>
        
        <!-- Section: Livres en Vedette -->
        <section class="col-lg-9 featured-section" id="featured-books-section">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="section-title mb-0">Livres en Vedette</h2>
                <div class="scroll-controls">
                    <button id="scroll-left" class="scroll-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button id="scroll-right" class="scroll-btn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <div class="d-flex overflow-auto gap-4 pb-3" id="featured-books-container" style="scroll-behavior: smooth;">
                {% for livre in livres %}
                    <div class="flex-shrink-0" style="width: 280px;">
                        <div class="book-card">
                            <div class="book-cover">
                                <img src="{{ livre.couverture_img }}" alt="Couverture de {{ livre.titre }}">
                                <div class="book-overlay"></div>
                                <div class="book-category">{{ livre.categorie.nom }}</div>
                            </div>
                            <div class="book-content">
                                <h3 class="book-title">{{ livre.titre }}</h3>
                                <p class="book-author">Par {{ livre.auteur }}</p>
                                <div class="book-meta">
                                    <div class="book-price">
                                        <i class="fas fa-dollar-sign me-1"></i>
                                        {{ livre.prix }}
                                    </div>
                                    <div class="book-status {% if livre.statut == 'disponible' %}status-available{% else %}status-unavailable{% endif %}">
                                        {{ livre.statut|capfirst }}
                                    </div>
                                </div>
                                
                                <!-- BOUTON pour afficher le r√©sum√© -->
                                <button class="toggle-resume-btn" data-id="{{ livre.id }}">
                                    <i class="fas fa-book-open me-2"></i>Voir le r√©sum√©
                                </button>

                                <!-- R√©sum√© cach√© -->
                                <div id="resume-{{ livre.id }}" class="resume-content" style="display: none;">
                                    {{ livre.description|linebreaks }}
                                </div>

                                <!-- Boutons d'action -->
                                <div class="book-actions">
                                    <button class="btn-reserve" data-book-id="{{ livre.id }}">
                                        {% if livre.statut == 'disponible' %}
                                            <i class="fas fa-bookmark me-2"></i>R√©server
                                        {% else %}
                                            <i class="fas fa-shopping-cart me-2"></i>Emprunter
                                        {% endif %}
                                    </button>
                                    <button class="btn-cart" data-book-id="{{ livre.id }}">
                                        <i class="fas fa-cart-plus me-2"></i>Ajouter au panier
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>
    </div>
</div>

<!-- Modal de confirmation -->
<div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmationModalLabel">Confirmation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="confirmationMessage"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary" id="confirmAdd">Confirmer</button>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript n√©cessaire -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Variables globales
    let currentBookId = null;
    const modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
    const confirmationMessage = document.getElementById('confirmationMessage');
    const confirmAddBtn = document.getElementById('confirmAdd');
    
    // Fonction pour basculer l'affichage du r√©sum√©
    function toggleResume(bookId) {
        const resumeElement = document.getElementById(`resume-${bookId}`);
        const buttonElement = document.querySelector(`.toggle-resume-btn[data-id="${bookId}"]`);
        
        if (resumeElement.style.display === 'none') {
            resumeElement.style.display = 'block';
            buttonElement.innerHTML = '<i class="fas fa-book-open me-2"></i>Masquer le r√©sum√©';
        } else {
            resumeElement.style.display = 'none';
            buttonElement.innerHTML = '<i class="fas fa-book-open me-2"></i>Voir le r√©sum√©';
        }
    }
    
    // Fonction pour ajouter un livre au panier
    function addToCart(bookId) {
        fetch(`/ajouter_au_panier/${bookId}/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Mettre √† jour le compteur du panier
                updateCartCount();
                
                // Afficher une notification
                showNotification('Livre ajout√© au panier avec succ√®s!', 'success');
            } else {
                // Afficher un message d'erreur
                showNotification(data.message || 'Erreur lors de l\'ajout au panier', 'error');
            }
        })
        .catch(error => {
            console.error('Erreur:', error);
            showNotification('Une erreur est survenue', 'error');
        });
    }
    
    // Fonction pour mettre √† jour le compteur du panier
    function updateCartCount() {
        fetch('/panier_count/')
        .then(response => response.json())
        .then(data => {
            const cartCountElement = document.getElementById('cart-count');
            if (cartCountElement) {
                cartCountElement.textContent = data.count;
            }
        });
    }
    
    // Fonction pour afficher les notifications
    function showNotification(message, type) {
        // Cr√©er l'√©l√©ment de notification
        const notification = document.createElement('div');
        notification.className = `alert alert-${type === 'success' ? 'success' : 'danger'} alert-dismissible fade show position-fixed top-0 end-0 m-3`;
        notification.style.zIndex = '1100';
        notification.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        `;
        
        // Ajouter √† la page
        document.body.appendChild(notification);
        
        // Supprimer automatiquement apr√®s 3 secondes
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }
    
    // √âcouteurs d'√©v√©nements pour les r√©sum√©s
    document.querySelectorAll('.toggle-resume-btn').forEach(button => {
        button.addEventListener('click', function() {
            const bookId = this.getAttribute('data-id');
            toggleResume(bookId);
        });
    });
    
    // √âcouteurs d'√©v√©nements pour les boutons "Ajouter au panier"
    document.querySelectorAll('.btn-cart').forEach(button => {
        button.addEventListener('click', function() {
            const bookId = this.getAttribute('data-book-id');
            currentBookId = bookId;
            
            // V√©rifier si le livre est d√©j√† dans le panier
            fetch(`/livre_dans_panier/${bookId}/`)
            .then(response => response.json())
            .then(data => {
                if (data.in_cart) {
                    showNotification('Ce livre est d√©j√† dans votre panier', 'error');
                } else {
                    // Afficher la modal de confirmation
                    confirmationMessage.textContent = `Voulez-vous ajouter "${this.closest('.book-card').querySelector('.book-title').textContent}" √† votre panier?`;
                    modal.show();
                }
            })
            .catch(error => {
                console.error('Erreur:', error);
                showNotification('Erreur de v√©rification du panier', 'error');
            });
        });
    });
    
    // Confirmation de l'ajout au panier
    confirmAddBtn.addEventListener('click', function() {
        if (currentBookId) {
            addToCart(currentBookId);
            modal.hide();
        }
    });
    
    // Fonctionnalit√© de d√©filement horizontal
    const scrollContainer = document.getElementById('featured-books-container');
    const scrollLeftBtn = document.getElementById('scroll-left');
    const scrollRightBtn = document.getElementById('scroll-right');
    
    scrollLeftBtn.addEventListener('click', () => {
        scrollContainer.scrollBy({ left: -300, behavior: 'smooth' });
    });
    
    scrollRightBtn.addEventListener('click', () => {
        scrollContainer.scrollBy({ left: 300, behavior: 'smooth' });
    });
    
    // Mettre √† jour le compteur du panier au chargement
    updateCartCount();
});
</script>


<!-- Section Statistiques -->
<section class="stats-section py-5">
    <div class="container">
        <div class="stats-header text-center mb-5">
            <h2 class="display-5 fw-bold">Statistiques de la Biblioth√®que</h2>
            <p class="text-muted fst-italic">Toutes les donn√©es cl√©s sur notre biblioth√®que en un coup d'≈ìil</p>
            <hr class="mx-auto" style="width: 60px; border-top: 3px solid #2e8b57;">
        </div>
        
        <div class="row g-4">
            <!-- Stat 1: Livres Disponibles -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow border-0">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon mb-3 text-primary">
                            <i class="fas fa-book fa-3x"></i>
                        </div>
                        <h3 class="stat-number card-title" id="livres_disponibles">{{ livres_disponibles }}</h3>
                        <p class="stat-label card-text text-muted">Livres Disponibles</p>
                    </div>
                </div>
            </div>

            <!-- Stat 2: Livres Emprunt√©s -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow border-0">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon mb-3 text-warning">
                            <i class="fas fa-book-reader fa-3x"></i>
                        </div>
                        <h3 class="stat-number card-title" id="livres_empruntes">{{ livres_empruntes }}</h3>
                        <p class="stat-label card-text text-muted">Livres Emprunt√©s</p>
                    </div>
                </div>
            </div>

            <!-- Stat 3: Nombre de Cat√©gories -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow border-0">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon mb-3 text-success">
                            <i class="fas fa-tags fa-3x"></i>
                        </div>
                        <h3 class="stat-number card-title" id="nombre_categories">{{ nombre_categories }}</h3>
                        <p class="stat-label card-text text-muted">Cat√©gories</p>
                    </div>
                </div>
            </div>

            <!-- Stat 4: Nombre d'Auteurs -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow border-0">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon mb-3 text-danger">
                            <i class="fas fa-user fa-3x"></i>
                        </div>
                        <h3 class="stat-number card-title" id="nombre_auteurs">{{ nombre_auteurs }}</h3>
                        <p class="stat-label card-text text-muted">Auteurs</p>
                    </div>
                </div>
            </div>

            <!-- Stat 5: Membres Actifs -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow border-0">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon mb-3 text-info">
                            <i class="fas fa-users fa-3x"></i>
                        </div>
                        <h3 class="stat-number card-title" id="membres_actifs">{{ membres_actifs }}</h3>
                        <p class="stat-label card-text text-muted">Membres Actifs</p>
                    </div>
                </div>
            </div>

            <!-- Stat 6: Emprunts ce mois -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow border-0">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon mb-3 text-purple">
                            <i class="fas fa-calendar-check fa-3x"></i>
                        </div>
                        <h3 class="stat-number card-title" id="emprunts_par_mois">{{ emprunts_par_mois }}</h3>
                        <p class="stat-label card-text text-muted">Emprunts ce Mois</p>
                    </div>
                </div>
            </div>

            <!-- Stat 7: Prix Litt√©raires -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow border-0">
                    <div class="card-body text-center p-4">
                        <div class="stat-icon mb-3 text-gold">
                            <i class="fas fa-trophy fa-3x"></i>
                        </div>
                        <h3 class="stat-number card-title" id="prix_litteraires">{{ prix_litteraires }}</h3>
                        <p class="stat-label card-text text-muted">Prix Litt√©raires</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .stats-section {
        background-color: #f8f9fa;
    }
    .card {
        border-radius: 15px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .stat-icon {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 80px;
        height: 80px;
        margin: 0 auto;
        border-radius: 50%;
        background: rgba(46, 139, 87, 0.1);
    }
    .stat-number {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
    }
    .text-purple {
        color: #6f42c1;
    }
    .text-gold {
        color: #ffc107;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Configuration des statistiques avec valeurs r√©elles
    const statsConfig = [
        { 
            id: 'livres_disponibles', 
            target: parseInt("{{ livres_disponibles }}"), 
            icon: 'book', 
            color: '#2e8b57' 
        },
        { 
            id: 'livres_empruntes', 
            target: parseInt("{{ livres_empruntes }}"), 
            icon: 'book-reader', 
            color: '#6a5acd' 
        },
        { 
            id: 'nombre_categories', 
            target: parseInt("{{ nombre_categories }}"), 
            icon: 'tags', 
            color: '#daa520' 
        },
        { 
            id: 'nombre_auteurs', 
            target: parseInt("{{ nombre_auteurs }}"), 
            icon: 'user', 
            color: '#dc3545' 
        },
        { 
            id: 'membres_actifs', 
            target: parseInt("{{ membres_actifs }}"), 
            icon: 'users', 
            color: '#0dcaf0' 
        },
        { 
            id: 'emprunts_par_mois', 
            target: parseInt("{{ emprunts_par_mois }}"), 
            icon: 'calendar-check', 
            color: '#198754' 
        },
        { 
            id: 'prix_litteraires', 
            target: parseInt("{{ prix_litteraires }}"), 
            icon: 'trophy', 
            color: '#6f42c1' 
        }
    ];
    
    // Ajouter des animations de couleur aux ic√¥nes
    statsConfig.forEach(stat => {
        const icon = document.querySelector(`#${stat.id}`).closest('.d-flex').querySelector('.stat-icon');
        if (icon) {
            icon.style.backgroundColor = `${stat.color}15`;
            icon.style.color = stat.color;
            icon.style.border = `2px solid ${stat.color}`;
        }
    });
    
    // Fonction d'animation des compteurs
    const animateCounters = () => {
        statsConfig.forEach(stat => {
            const counter = document.getElementById(stat.id);
            if (!counter) return;
            
            const target = stat.target;
            const duration = 2000;
            const frameDuration = 1000 / 60;
            const totalFrames = Math.round(duration / frameDuration);
            let frame = 0;
            
            // Sauvegarder la valeur finale
            const finalValue = counter.innerText;
            
            // Initialiser √† 0 pour l'animation
            counter.innerText = '0';
            
            // Animer l'augmentation du compteur
            const counterInterval = setInterval(() => {
                frame++;
                
                // Calculer la progression
                const progress = frame / totalFrames;
                const currentValue = Math.round(target * progress);
                
                counter.innerText = currentValue.toLocaleString();
                
                if (frame === totalFrames) {
                    clearInterval(counterInterval);
                    
                    // Restaurer la valeur exacte
                    counter.innerText = finalValue;
                    
                    // Ajouter un effet apr√®s l'animation
                    counter.style.fontWeight = 'bold';
                    counter.style.color = stat.color;
                    counter.style.transform = 'scale(1.1)';
                    
                    setTimeout(() => {
                        counter.style.transform = 'scale(1)';
                    }, 300);
                }
            }, frameDuration);
        });
    };
    
    // Observer l'intersection pour lancer l'animation au d√©filement
    const statsSection = document.querySelector('.stats-section');
    if (statsSection) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounters();
                    observer.unobserve(statsSection);
                }
            });
        }, { threshold: 0.1 });
        
        observer.observe(statsSection);
    }
});
</script>

<style>
/* Styles am√©lior√©s pour les statistiques */
.stats-section {
    padding: 4rem 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 20px;
    margin: 3rem 0;
}

.stats-header h2 {
    color: #2e8b57;
    position: relative;
    display: inline-block;
    margin-bottom: 1.5rem;
}

.stats-header h2:after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 4px;
    background: #daa520;
    border-radius: 2px;
}

.stat-icon {
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    margin: 0 auto 1.5rem;
    font-size: 2rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.stat-icon:hover {
    transform: translateY(-5px) rotate(5deg);
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
}

.stat-number {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    transition: all 0.5s ease;
}

.stat-label {
    font-size: 1.1rem;
    color: #495057;
    font-weight: 500;
    background: rgba(255,255,255,0.7);
    padding: 5px 15px;
    border-radius: 20px;
    display: inline-block;
}

/* Animation de pulsation */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.stats-section:hover .stat-icon {
    animation: pulse 2s infinite;
}

/* Responsive */
@media (max-width: 768px) {
    .stat-icon {
        width: 70px;
        height: 70px;
        font-size: 1.8rem;
    }
    
    .stat-number {
        font-size: 2rem;
    }
}
</style>

    <!-- Section Newsletter -->
    <section class="newsletter-section">
        <div class="container">
            <div class="newsletter-content">
                <div class="newsletter-icon">
                    <i class="fas fa-envelope-open-text"></i>
                </div>
                <h2 class="newsletter-title">Recevez nos recommandations litt√©raires</h2>
                <p class="newsletter-text">
                    Inscrivez-vous √† notre newsletter mensuelle pour d√©couvrir des recommandations personnalis√©es et les derni√®res nouveaut√©s de notre biblioth√®que.
                </p>
                
                <form class="newsletter-form">
                    <input type="email" class="newsletter-input" placeholder="Votre adresse email" required>
                    <button type="submit" class="newsletter-btn">
                        S'inscrire <i class="fas fa-arrow-right ms-2"></i>
                    </button>
                </form>
                <p class="newsletter-legal">
                    En vous inscrivant, vous acceptez de recevoir nos emails. Vous pourrez vous d√©sabonner √† tout moment.
                </p>
            </div>
        </div>
    </section>

    <!-- Pied de page -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <!-- √Ä propos -->
                <div class="col-lg-4 mb-5 mb-lg-0">
                    <div class="footer-brand">
                        <i class="fas fa-book me-2"></i> MonBiblio
                    </div>
                    <p class="footer-text">
                        Notre biblioth√®que est d√©di√©e √† la promotion de la lecture et √† l'acc√®s √† la connaissance pour tous. Nous proposons des milliers d'ouvrages dans toutes les cat√©gories.
                    </p>
                    <div class="footer-social">
                        <a href="#" class="footer-social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="footer-social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="footer-social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="footer-social-link"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <!-- Liens rapides -->
                <div class="col-md-6 col-lg-2 mb-4 mb-md-0">
                    <h3 class="footer-title">Liens Rapides</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><a href="#"><i class="fas fa-home me-2"></i>Accueil</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-book me-2"></i>Catalogue</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-star me-2"></i>Nouveaut√©s</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-calendar me-2"></i>√âv√©nements</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-info-circle me-2"></i>√Ä Propos</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-phone me-2"></i>Contact</a></li>
                    </ul>
                </div>

                <!-- Services -->
                <div class="col-md-6 col-lg-2 mb-4 mb-md-0">
                    <h3 class="footer-title">Services</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><a href="#"><i class="fas fa-bookmark me-2"></i>Emprunter</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-calendar-check me-2"></i>R√©server</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-tablet-alt me-2"></i>E-Books</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-chalkboard-teacher me-2"></i>Ateliers</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-id-card me-2"></i>Adh√©sion</a></li>
                    </ul>
                </div>

                <!-- Contact -->
                <div class="col-md-6 col-lg-4">
                    <h3 class="footer-title">Contact</h3>
                    <div class="footer-contact">
                        <i class="fas fa-map-marker-alt"></i>
                        <div class="footer-contact-text">
                            123 Rue de la Biblioth√®que Angre, 75001 Abidjan, Cote D'Ivoire
                        </div>
                    </div>
                    <div class="footer-contact">
                        <i class="fas fa-phone"></i>
                        <div class="footer-contact-text">
                            +225 07 57 67 62 27
                        </div>
                    </div>
                    <div class="footer-contact">
                        <i class="fas fa-envelope"></i>
                        <div class="footer-contact-text">
                            <a href="mailto:mail1biblio@bibliotheque.ci">mail1biblio@bibliotheque.ci</a>
                        </div>
                    </div>
                    <div class="footer-contact">
                        <i class="fas fa-clock"></i>
                        <div class="footer-contact-text">
                            Lun-Ven: 8h-18h, Sam: 9h-16h
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pied de page bas -->
            <div class="footer-bottom">
                <div class="footer-legal">
                    &copy; 2025 MonBiblio. Tous droits r√©serv√©s. | 
                    <a href="#">Politique de confidentialit√©</a> |
                    <a href="#">Conditions d'utilisation</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Dans votre template (home.html ou categorie_detail.html) -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Gestion des boutons d'ajout au panier
    document.querySelectorAll('.btn-cart').forEach(button => {
        button.addEventListener('click', function() {
            const bookId = this.getAttribute('data-book-id');
            
            // Envoyer d'abord une demande de confirmation
            fetch(`/ajouter-au-panier/${bookId}/`, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.confirmation) {
                    if (confirm(data.message)) {
                        // Si l'utilisateur confirme, envoyer la requ√™te POST
                        fetch(`/ajouter-au-panier/${bookId}/`, {
                            method: 'POST',
                            headers: {
                                'X-CSRFToken': '{{ csrf_token }}',
                                'X-Requested-With': 'XMLHttpRequest'
                            }
                        })
                        .then(response => response.json())
                        .then(result => {
                            if (result.success) {
                                alert('Livre ajout√© au panier avec succ√®s!');
                                
                                // D√©sactiver le bouton
                                this.innerHTML = '<i class="fas fa-check me-1"></i> Ajout√©';
                                this.classList.add('btn-cart-disabled');
                                this.disabled = true;
                                
                                // Mettre √† jour le compteur du panier
                                updateCartCounter();
                            } else {
                                alert(result.message || 'Erreur lors de l\'ajout au panier');
                            }
                        });
                    }
                } else if (data.success === false) {
                    alert(data.message);
                }
            });
        });
    });
    
    function updateCartCounter() {
        // R√©cup√©rer le compteur du panier dans la navbar
        const cartCounter = document.getElementById('cart-count');
        if (cartCounter) {
            // Faire une requ√™te pour obtenir le nombre d'articles dans le panier
            fetch('/panier-count/')
                .then(response => response.json())
                .then(data => {
                    cartCounter.textContent = data.count;
                });
        }
    }
});
</script>

</body>
</html>